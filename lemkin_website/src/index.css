@tailwind base;
@tailwind components;
@tailwind utilities;

/* Achromatic, Institutional Design System */
@layer base {
  :root {
    /* Achromatic, institutional */
    --ink-0: #ffffff;
    --ink-1: #f7f8fa;     /* paper */
    --ink-2: #f1f3f7;     /* sheet */
    --ink-3: #e6eaf0;     /* card line */
    --ink-8: #0e1116;     /* brand neutral (OpenAI/Palantir vibe) */

    /* Base surfaces */
    --color-bg-primary: var(--ink-0);
    --color-bg-secondary: var(--ink-1);
    --color-bg-tertiary: var(--ink-2);
    --color-bg-elevated: var(--ink-0);
    --color-bg-overlay: rgba(0,0,0,.5);

    /* Text */
    --color-text-primary: var(--ink-8);
    --color-text-secondary: #3f4752;
    --color-text-tertiary: #6b7280;
    --color-text-disabled: #9aa2ad;
    --color-text-inverse: #ffffff;

    /* Borders & focus */
    --color-border-primary: rgba(14,17,22, .10);
    --color-border-secondary: rgba(14,17,22, .06);
    --color-border-active: var(--ink-8);

    /* "Primary" becomes neutral black for CTAs/links */
    --color-primary: var(--ink-8);
    --color-primary-hover: #141922;
    --color-primary-active: #0a0d12;

    /* Subtle/disabled gradients set to near-none by default */
    --gradient-brand: linear-gradient(135deg, rgba(14,17,22,.04), rgba(14,17,22,.06));
    --gradient-mesh: radial-gradient(at 40% 20%, rgba(14,17,22,.04) 0px, transparent 50%);

    /* Aliases to match existing TSX usage (no mass renames needed) */
    --color-fg-primary: var(--color-text-primary);
    --color-fg-muted: var(--color-text-secondary);
    --color-fg-subtle: var(--color-text-tertiary);
    --color-fg-inverse: var(--color-text-inverse);
    --color-bg-default: var(--color-bg-primary);
    --color-border-default: var(--color-border-primary);
    --color-accent-cta: var(--ink-8);
  }

  .dark {
    --color-bg-primary: #0a0a0a;
    --color-bg-secondary: #111111;
    --color-bg-tertiary: #171717;
    --color-bg-elevated: #121212;
    --color-bg-overlay: rgba(0,0,0,.7);

    --color-text-primary: #f5f7fa;
    --color-text-secondary: #b8c0cc;
    --color-text-tertiary: #8a94a3;
    --color-text-disabled: #5b6470;
    --color-text-inverse: #0a0a0a;

    --color-border-primary: rgba(255,255,255,.10);
    --color-border-secondary: rgba(255,255,255,.06);
    --color-border-active: #e6eaf0;

    --color-primary: #e6eaf0;
    --color-primary-hover: #f0f3f7;
    --color-primary-active: #ffffff;

    --gradient-brand: linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.04));
    --gradient-mesh: radial-gradient(at 40% 20%, rgba(255,255,255,.05) 0px, transparent 50%);
  }

  * {
    border-color: var(--color-border-primary);
  }

  body {
    @apply bg-[var(--color-bg-primary)] text-[var(--color-text-primary)];
    font-feature-settings: "rlig" 1, "calt" 1, "ss01" 1, "ss02" 1;
  }
}

/* Professional Typography */
@layer base {
  html {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold tracking-tight;
  }

  code, pre {
    @apply font-mono;
  }
}

/* Strong, neutral focus ring (WCAG AA on both themes) */
@layer utilities {
  .focus-ring {
    @apply focus-visible:outline-none ring-2 ring-offset-2;
    --tw-ring-color: var(--color-border-active);
    --tw-ring-offset-color: var(--color-bg-primary);
  }

  .focus-within-ring {
    @apply focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2;
    --tw-ring-color: var(--color-border-active);
    --tw-ring-offset-color: var(--color-bg-primary);
  }
}

/* Tone down flashy utilities by default (kept for optional use) */
@layer utilities {
  .hover-glow, .gradient-animate, .text-gradient, .text-shimmer {
    animation: none !important;
    filter: none !important;
    background: none !important;
  }
}

/* Professional Animations */
@layer utilities {
  /* Smooth Scroll */
  html {
    scroll-behavior: smooth;
  }

  /* Micro-interactions */
  .hover-lift {
    @apply transition-all duration-300 ease-out hover:-translate-y-1 hover:shadow-elevation-3;
  }

  .hover-glow {
    @apply transition-all duration-300 hover:shadow-glow;
  }

  .hover-scale {
    @apply transition-transform duration-200 ease-out hover:scale-[1.02] active:scale-[0.98];
  }

  .hover-brightness {
    @apply transition-all duration-200 hover:brightness-110;
  }

  /* Text Animations */
  .text-gradient {
    @apply bg-gradient-to-r from-primary-600 to-accent-purple bg-clip-text text-transparent;
  }

  .text-shimmer {
    background: linear-gradient(105deg, transparent 40%, rgba(255,255,255,0.7) 50%, transparent 60%);
    background-size: 200% 100%;
    background-position: -100% 0;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: shimmer 2s infinite;
  }

  /* Glass Morphism */
  .glass {
    @apply bg-white/80 dark:bg-neutral-900/80 backdrop-blur-xl backdrop-saturate-150 border border-white/20 dark:border-white/10;
  }

  .glass-subtle {
    @apply bg-white/40 dark:bg-neutral-900/40 backdrop-blur-md backdrop-saturate-150 border border-white/10 dark:border-white/5;
  }

  /* Noise Texture Overlay */
  .noise-overlay {
    position: relative;
  }

  .noise-overlay::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.02'/%3E%3C/svg%3E");
    opacity: 0.03;
    pointer-events: none;
  }
}

/* Loading States */
@layer utilities {
  .skeleton {
    @apply animate-pulse bg-gradient-to-r from-neutral-200 via-neutral-300 to-neutral-200 dark:from-neutral-800 dark:via-neutral-700 dark:to-neutral-800;
    background-size: 200% 100%;
    animation: skeleton 1.5s ease-in-out infinite;
  }

  @keyframes skeleton {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }
}

/* Custom Scrollbar */
@layer utilities {
  ::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-neutral-100 dark:bg-neutral-900;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-neutral-400 dark:bg-neutral-600 rounded-full;
    @apply hover:bg-neutral-500 dark:hover:bg-neutral-500;
  }

  ::-webkit-scrollbar-thumb:active {
    @apply bg-neutral-600 dark:bg-neutral-400;
  }
}

/* Selection Styles */
@layer base {
  ::selection {
    @apply bg-primary-200 dark:bg-primary-900 text-primary-900 dark:text-primary-100;
  }

  ::-moz-selection {
    @apply bg-primary-200 dark:bg-primary-900 text-primary-900 dark:text-primary-100;
  }
}

/* Advanced Gradient Animations */
@layer utilities {
  .gradient-animate {
    background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
    background-size: 400% 400%;
    animation: gradient-shift 15s ease infinite;
  }

  @keyframes gradient-shift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  .gradient-radial-animate {
    background: radial-gradient(circle at 50% 50%, rgba(59, 130, 246, 0.1), transparent 50%);
    animation: radial-pulse 4s ease-in-out infinite;
  }

  @keyframes radial-pulse {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.1); opacity: 0.7; }
  }
}

/* Shadow Elevation System */
@layer utilities {
  .shadow-elevation-1 { box-shadow: 0 1px 2px rgba(14,17,22,.05); }
  .shadow-elevation-2 { box-shadow: 0 4px 12px rgba(14,17,22,.07); }
  .shadow-elevation-3 { box-shadow: 0 8px 24px rgba(14,17,22,.08); }
  .shadow-elevation-4 { box-shadow: 0 14px 40px rgba(14,17,22,.10); }
}

/* Sophisticated Hover Effects */
@layer components {
  .btn-primary {
    @apply relative overflow-hidden px-6 py-3 font-medium text-white bg-primary-600 rounded-xl transition-all duration-300 hover:bg-primary-700 hover:shadow-elevation-3 active:scale-[0.98];
  }

  .btn-primary::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.5);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
  }

  .btn-primary:hover::before {
    width: 300px;
    height: 300px;
  }

  .card-hover {
    @apply relative overflow-hidden transition-all duration-500 hover:shadow-elevation-4;
  }

  .card-hover::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transition: left 0.5s;
  }

  .card-hover:hover::before {
    left: 100%;
  }
}